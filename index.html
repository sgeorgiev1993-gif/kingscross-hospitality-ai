<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>King's Cross Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 40px;
    }
    section {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
      color: #333;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      margin-bottom: 8px;
    }
    a {
      color: #0077cc;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .status-good {
      color: green;
    }
    .status-warning {
      color: orange;
    }
    .status-bad {
      color: red;
    }
    img.dashboard-img {
      display: block;
      margin: 20px auto;
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>King's Cross Dashboard</h1>

  <section id="transport">
    <h2>ðŸš‡ Transport Status</h2>
    <ul id="transport-list"></ul>
  </section>

  <section id="events">
    <h2>ðŸŽŸ Upcoming Events</h2>
    <ul id="events-list"></ul>
  </section>

  <section id="news">
    <h2>ðŸ“° Latest News</h2>
    <ul id="news-list"></ul>
  </section>

  <section id="weather">
    <h2>ðŸŒ¤ Weather</h2>
    <p id="weather-info"></p>
  </section>

  <section id="dashboard-image">
    <h2>ðŸ“Š Dashboard Visual</h2>
    <img class="dashboard-img" src="data/kingscross_dashboard.png" alt="Dashboard">
  </section>

  <script>
    async function loadDashboard() {
      try {
        const response = await fetch('data/kingscross_dashboard.json');
        const data = await response.json();

        // Transport
        const transportList = document.getElementById('transport-list');
        data.transport.forEach(item => {
          const li = document.createElement('li');
          let statusClass = 'status-good';
          if(item.status.toLowerCase().includes('minor') || item.status.toLowerCase().includes('part')) statusClass = 'status-warning';
          if(item.status.toLowerCase().includes('closure') || item.status.toLowerCase().includes('severe')) statusClass = 'status-bad';
          li.innerHTML = `<strong>${item.mode.toUpperCase()}</strong>: ${item.line} â€” <span class="${statusClass}">${item.status}</span>`;
          transportList.appendChild(li);
        });

        // Events
        const eventsList = document.getElementById('events-list');
        if(data.events.length === 0) {
          eventsList.innerHTML = '<li>No upcoming events found.</li>';
        } else {
          data.events.forEach(event => {
            const li = document.createElement('li');
            li.innerHTML = `${event.start} â€” <a href="${event.url}" target="_blank">${event.name}</a> @ ${event.venue}`;
            eventsList.appendChild(li);
          });
        }

        // News
        const newsList = document.getElementById('news-list');
        if(data.news.length === 0) {
          newsList.innerHTML = '<li>No news available.</li>';
        } else {
          data.news.forEach(article => {
            const li = document.createElement('li');
            li.innerHTML = `<a href="${article.url}" target="_blank">${article.title}</a> (${article.source})`;
            newsList.appendChild(li);
          });
        }

        // Weather
        const weatherInfo = document.getElementById('weather-info');
        if(data.weather && data.weather.temp) {
          weatherInfo.textContent = `Temperature: ${data.weather.temp}Â°C, Condition: ${data.weather.condition}`;
        } else {
          weatherInfo.textContent = 'Weather data not available.';
        }

      } catch (err) {
        console.error('Error loading dashboard:', err);
      }
    }

    loadDashboard();
  </script>
</body>
</html>
