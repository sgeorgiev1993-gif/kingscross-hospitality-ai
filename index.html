<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Kings Cross Hospitality Intelligence</title>

<style>
:root{
  --bg:#0b0d12;
  --card:#121622;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#f97316;
  --good:#22c55e;
  --warn:#fbbf24;
  --bad:#f87171;
}

body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
}

.wrap{max-width:1100px;margin:auto;padding:16px}
.card{
  background:var(--card);
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
}

.venue{
  padding:10px;
  border-radius:12px;
  margin-bottom:8px;
  cursor:pointer;
}

.low{background:rgba(34,197,94,.12)}
.mid{background:rgba(251,191,36,.14)}
.high{background:rgba(248,113,113,.16)}

small{color:var(--muted)}
</style>
</head>

<body>
<div class="wrap">

<h2>Nearby Venues (Transport Impact)</h2>
<div id="venues"></div>

</div>

<script>
async function loadJSON(p){
  try{const r=await fetch(p,{cache:"no-store"});return r.ok?await r.json():null}catch{return null}
}

function impactClass(v){
  if(v.transport_impact >= 8) return "high";
  if(v.transport_impact >= 4) return "mid";
  return "low";
}

(async()=>{
  const dash = await loadJSON("data/kingscross_dashboard.json");
  const wrap = document.getElementById("venues");

  (dash?.venues||[]).forEach(v=>{
    const d=document.createElement("div");
    d.className="venue "+impactClass(v);
    d.innerHTML=`
      <strong>${v.name}</strong><br/>
      <small>${v.distance_km} km Â· impact ${v.transport_impact}/10</small>
    `;
    wrap.appendChild(d);
  });
})();
</script>
</body>
</html>