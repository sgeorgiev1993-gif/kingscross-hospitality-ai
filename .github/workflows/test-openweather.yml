- name: Test OpenWeather API
        env:
          OPENWEATHER_KEY: ${{ secrets.OPENWEATHER_KEY }}
        run: |
          python - <<'EOF'
          import os, requests

          lat, lon = 51.5308, -0.1238
          api_key = os.environ.get("OPENWEATHER_KEY")
          url = f"https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={api_key}&units=metric"

          r = requests.get(url)
          print("🔍 Response status:", r.status_code)
          if r.status_code == 200:
              data = r.json()
              weather = data['weather'][0]['description']
              temp = data['main']['temp']
              print(f"✅ Success! Weather in Kings Cross: {weather}, {temp}°C")
          else:
              print(f"❌ API failed: {r.status_code}, {r.text}")
          EOF
